!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/script.ts")}({"./node_modules/charenc/charenc.js":function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},"./node_modules/crypt/crypt.js":function(e,t){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],o=0;o<4;o++)8*r+6*o<=8*e.length?t.push(n.charAt(i>>>6*(3-o)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&t.push((n.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(e.charAt(r))>>>6-2*i);return t}},e.exports=r},"./node_modules/is-buffer/index.js":function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},"./node_modules/md5/md5.js":function(e,t,n){var r,i,o,s,a;r=n("./node_modules/crypt/crypt.js"),i=n("./node_modules/charenc/charenc.js").utf8,o=n("./node_modules/is-buffer/index.js"),s=n("./node_modules/charenc/charenc.js").bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):i.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var n=r.bytesToWords(e),u=8*e.length,c=1732584193,l=-271733879,f=-1732584194,p=271733878,d=0;d<n.length;d++)n[d]=16711935&(n[d]<<8|n[d]>>>24)|4278255360&(n[d]<<24|n[d]>>>8);n[u>>>5]|=128<<u%32,n[14+(u+64>>>9<<4)]=u;var h=a._ff,g=a._gg,m=a._hh,b=a._ii;for(d=0;d<n.length;d+=16){var v=c,w=l,y=f,k=p;l=b(l=b(l=b(l=b(l=m(l=m(l=m(l=m(l=g(l=g(l=g(l=g(l=h(l=h(l=h(l=h(l,f=h(f,p=h(p,c=h(c,l,f,p,n[d+0],7,-680876936),l,f,n[d+1],12,-389564586),c,l,n[d+2],17,606105819),p,c,n[d+3],22,-1044525330),f=h(f,p=h(p,c=h(c,l,f,p,n[d+4],7,-176418897),l,f,n[d+5],12,1200080426),c,l,n[d+6],17,-1473231341),p,c,n[d+7],22,-45705983),f=h(f,p=h(p,c=h(c,l,f,p,n[d+8],7,1770035416),l,f,n[d+9],12,-1958414417),c,l,n[d+10],17,-42063),p,c,n[d+11],22,-1990404162),f=h(f,p=h(p,c=h(c,l,f,p,n[d+12],7,1804603682),l,f,n[d+13],12,-40341101),c,l,n[d+14],17,-1502002290),p,c,n[d+15],22,1236535329),f=g(f,p=g(p,c=g(c,l,f,p,n[d+1],5,-165796510),l,f,n[d+6],9,-1069501632),c,l,n[d+11],14,643717713),p,c,n[d+0],20,-373897302),f=g(f,p=g(p,c=g(c,l,f,p,n[d+5],5,-701558691),l,f,n[d+10],9,38016083),c,l,n[d+15],14,-660478335),p,c,n[d+4],20,-405537848),f=g(f,p=g(p,c=g(c,l,f,p,n[d+9],5,568446438),l,f,n[d+14],9,-1019803690),c,l,n[d+3],14,-187363961),p,c,n[d+8],20,1163531501),f=g(f,p=g(p,c=g(c,l,f,p,n[d+13],5,-1444681467),l,f,n[d+2],9,-51403784),c,l,n[d+7],14,1735328473),p,c,n[d+12],20,-1926607734),f=m(f,p=m(p,c=m(c,l,f,p,n[d+5],4,-378558),l,f,n[d+8],11,-2022574463),c,l,n[d+11],16,1839030562),p,c,n[d+14],23,-35309556),f=m(f,p=m(p,c=m(c,l,f,p,n[d+1],4,-1530992060),l,f,n[d+4],11,1272893353),c,l,n[d+7],16,-155497632),p,c,n[d+10],23,-1094730640),f=m(f,p=m(p,c=m(c,l,f,p,n[d+13],4,681279174),l,f,n[d+0],11,-358537222),c,l,n[d+3],16,-722521979),p,c,n[d+6],23,76029189),f=m(f,p=m(p,c=m(c,l,f,p,n[d+9],4,-640364487),l,f,n[d+12],11,-421815835),c,l,n[d+15],16,530742520),p,c,n[d+2],23,-995338651),f=b(f,p=b(p,c=b(c,l,f,p,n[d+0],6,-198630844),l,f,n[d+7],10,1126891415),c,l,n[d+14],15,-1416354905),p,c,n[d+5],21,-57434055),f=b(f,p=b(p,c=b(c,l,f,p,n[d+12],6,1700485571),l,f,n[d+3],10,-1894986606),c,l,n[d+10],15,-1051523),p,c,n[d+1],21,-2054922799),f=b(f,p=b(p,c=b(c,l,f,p,n[d+8],6,1873313359),l,f,n[d+15],10,-30611744),c,l,n[d+6],15,-1560198380),p,c,n[d+13],21,1309151649),f=b(f,p=b(p,c=b(c,l,f,p,n[d+4],6,-145523070),l,f,n[d+11],10,-1120210379),c,l,n[d+2],15,718787259),p,c,n[d+9],21,-343485551),c=c+v>>>0,l=l+w>>>0,f=f+y>>>0,p=p+k>>>0}return r.endian([c,l,f,p])})._ff=function(e,t,n,r,i,o,s){var a=e+(t&n|~t&r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._gg=function(e,t,n,r,i,o,s){var a=e+(t&r|n&~r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._hh=function(e,t,n,r,i,o,s){var a=e+(t^n^r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._ii=function(e,t,n,r,i,o,s){var a=e+(n^(t|~r))+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(a(e,t));return t&&t.asBytes?n:t&&t.asString?s.bytesToString(n):r.bytesToHex(n)}},"./src/script.ts":function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/utilities/jsonRequest.ts"),s=n("./src/utilities/string.ts"),a=n("./src/utilities/html.ts"),u=n("./src/utilities/image.ts"),c=n("./src/utilities/url.ts");function l(e){void 0===e&&(e="");var t,n,r={name:e};return(n=(t=/(\[((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)\])/g).exec(e))&&(r.website=n[2],e=e.replace(t,"")),(n=(t=/(\[((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?) (.*)\])/g).exec(e))&&(r.name=n[6],r.website=n[2],e=e.replace(t,"")),(n=(t=/\[\[(.*)\]\]/g).exec(e))&&(r.name=n[1],r.wiki=c.toWikiUrl(n[1]),e=e.replace(t,"")),r}function f(e){var t=a.createElement("div",'<div class="header">\n        <div class="name">'+(e.website?'<a href="'+e.website+'" target="_blank">'+e.name+"</a>":e.name)+"</div>\n        "+(e.website?'<a href="'+e.website+'" target="_blank">'+(e.image?'<img class="img" src="'+e.image+'"/>':'<img class="img" src="https://wiki.openstreetmap.org/w/images/thumb/c/ca/Map-14.svg/140px-Map-14.svg.png"/>')+"</a>":e.image?'<img class="img" src="'+e.image+'"/>':'<img class="img" src="https://wiki.openstreetmap.org/w/images/thumb/c/ca/Map-14.svg/140px-Map-14.svg.png"/>')+'\n      </div>\n      <div class="description">'+e.description+"</div>\n      "+(e.website?'<a class="link" href="'+e.website+'" target="_blank"><i class="far fa-map"></i></a>':"")+"\n      "+(e.wiki?'<a class="link" href="'+e.wiki+'" target="_blank"><i class="fas fa-atlas"></i></a>':"")+'\n      <div class="themes">'+e.themes.map((function(e){var t=function(e){for(var t=0,n=0,r=0,i=0;i<e.length;i++)i%3==0?t=(t+e.charCodeAt(i))%256:i%3==1?n=(n+e.charCodeAt(i))%256:r=(r+e.charCodeAt(i))%256;return{r:t,g:n,b:r}}(e),n=(299*t.r+587*t.g+114*t.b)/1e3;return'<span class="thema" style="background: rgb('+t.r+","+t.g+","+t.b+"); color:"+(n>=128?"black":"white")+';">'+e+"</span>"})).join("")+"</div>",["app"]);document.body.appendChild(t)}function p(e,t,n,r){var i=t.search(new RegExp("{{"+n.replace(" ","[_ ]"),"gi"));if(-1!==i){var o=t.substring(i),a=s.findClosingBracketIndex(o,0),u=o.substring(a+1);(function(e,t,n){var r={},i=t.split(/\|(?![^{]*})(?![^\[]*\])/g);for(var o in i.shift(),i){var s=i[o].trim(),a=s.indexOf("="),u=s.substring(0,a).trim(),c=s.substring(a+1).trim();c&&(r[u]=c)}n(r,e)})(e,o=(o=o.substring(0,a+1)).substring(o.indexOf("|"),o.length-2).trim(),r),p(e,u,n,r)}}function d(e,t,n){return r(this,void 0,void 0,(function(){var r,o,s,a;return i(this,(function(i){switch(i.label){case 0:return[4,h({prop:"revisions",rvprop:"content",pageids:e.join("|"),rvslots:"*"})];case 1:for(s in r=i.sent(),o=r.query.pages)a=o[s].revisions[0].slots.main.content,p(o[s].title,a,t,n);return[2]}}))}))}function h(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return"https://wiki.openstreetmap.org/w/api.php",e.origin="*",e.action="query",e.formatversion="2",e.format="json",[4,o.getJson("https://wiki.openstreetmap.org/w/api.php",e)];case 1:return[2,t.sent()]}}))}))}function g(e,t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(o){switch(o.label){case 0:return[4,h({list:"embeddedin",eititle:"Template:"+e,eilimit:"500"})];case 1:return(n=o.sent()).continue&&n.continue.eicontinue&&function(e,t,n){r(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,h({list:"embeddedin",eititle:"Template:"+t,eicontinue:e,eilimit:"500"})];case 1:return m(r.sent(),t,n),[2]}}))}))}(n.continue.eicontinue,e,t),[2,m(n,e,t)]}}))}))}function m(e,t,n){var r=e.query.embeddedin,i=[];for(var o in r)/^\w{2}:/g.test(r[o].title)||i.push(r[o].pageid),i.length>=50&&(d(i,t,n),i=[]);i.length>0&&d(i,t,n)}!function(){r(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return e=g("Software",(function(e,t){var n={name:e.name||"",description:e.description||"",image:u.toWikimediaUrl(e.screenshot),website:c.toUrl(e.web),wiki:c.toWikiUrl(e.wiki||t)||"",languages:(e.languages||"").split(/;/).filter((function(e){return e})),themes:(e.genre||"").split(";").filter((function(e){return e})).map((function(e){return""+e[0].toUpperCase()+e.slice(1)}))},r=l(e.name);n.name=r.name||n.name,n.website=n.website||r.website,n.wiki=n.wiki||r.wiki||"",r=l(e.web),n.name=n.name||r.name,n.website=r.website||n.website,n.wiki=n.wiki||r.wiki||"",r=l(e.wiki),n.name=n.name||r.name,n.website=n.website||r.website,n.wiki=r.wiki||n.wiki,f(n)})),t=g("Service item",(function(e,t){var n={name:e.name||"",description:e.descr||"",image:u.toWikimediaUrl(e.image),wiki:c.toWikiUrl(t)||"",languages:(e.lang||"").split(/,+(?![^\(]*\))/).map((function(e){var t=/:(\w{2})/.exec(e);return t?t[1]:e})).filter((function(e){return e})),themes:(e.genre||"").split(/,+(?![^\(]*\))/).map((function(e){return e.replace(/^[\.\s]+|[\.\s]+$/gm,"")})).filter((function(e){return e})).map((function(e){return""+e[0].toUpperCase()+e.slice(1)}))},r=l(e.name);n.name=r.name||n.name,n.website=r.website,n.wiki=n.wiki||r.wiki||"",f(n)})),[4,e];case 1:return n.sent(),[4,t];case 2:return n.sent(),[2]}}))}))}()},"./src/utilities/html.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHtmlElement=function(e,t){void 0===t&&(t=document);var n=t.querySelector(e);if(!n)throw"Element "+e+" not found.";return n},t.getHtmlElements=function(e,t){void 0===t&&(t=document);var n=[];return t.querySelectorAll(e).forEach((function(e){n.push(e)})),n},t.createElement=function(e,t,n){var r;void 0===t&&(t=""),void 0===n&&(n=[]);var i=document.createElement(e);return i.innerHTML=t,(r=i.classList).add.apply(r,n),i}},"./src/utilities/image.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/md5/md5.js"),i=n("./src/utilities/url.ts"),o=n("./src/utilities/string.ts");t.toWikimediaUrl=function(e){if(e){var t="";if(i.httpRegex.test(e))return e;t=o.startsWithIgnoreCase(e,"File:")?e.substring(5,e.length):o.startsWithIgnoreCase(e,"https://wiki.openstreetmap.org/wiki/File:")?e.substring(40,e.length):o.startsWithIgnoreCase(e,"http://wiki.openstreetmap.org/wiki/File:")?e.substring(39,e.length):e,t=decodeURI(t).replace(/ /g,"_");var n=r(t);return"https://wiki.openstreetmap.org/w/images/thumb/"+n.substring(0,1)+"/"+n.substring(0,2)+"/"+t+"/250px-"+t}}},"./src/utilities/jsonRequest.ts":function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/utilities/url.ts");t.getJson=function(e,t){return r(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,fetch(e+"?"+o.utilQsString(t),{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}})];case 1:return[4,n.sent().json()];case 2:return[2,n.sent()]}}))}))}},"./src/utilities/string.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.equalsIgnoreCase=function(e,t){return(e||"").toUpperCase()===(t||"").toUpperCase()},t.startsWithIgnoreCase=function(e,t,n){return e.toUpperCase().startsWith(t.toUpperCase(),n)},t.findClosingBracketIndex=function(e,t){if("{"!==e[t])throw new Error("The position must contain an opening bracket");for(var n=1,r=t+1;r<e.length;r++)if("{"===e[r]?n++:"}"===e[r]&&n--,0===n)return r;return-1}},"./src/utilities/url.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.httpRegex=/^https?:\/\//i,t.toUrl=function(e){if(e)return t.httpRegex.test(e)?e:"http://"+e},t.toWikiUrl=function(e){if(e)return t.httpRegex.test(e)?e:"https://wiki.openstreetmap.org/wiki/"+e},t.utilQsString=function(e,t){return Object.keys(e).sort().map((function(n){return encodeURIComponent(n)+"="+(t?(r=e[n],encodeURIComponent(r).replace(/(%2F|%3A|%2C|%7B|%7D)/g,decodeURIComponent)):encodeURIComponent(e[n]));var r})).join("&")}}});